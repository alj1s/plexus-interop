<!DOCTYPE html>
<html lang="en">
<head>
<meta charset=" utf-8 ">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Plexus Interop</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Plexus Interop</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#getting-started">Getting Started</a>
<ul class="sectlevel2">
<li><a href="#overview">Overview</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#repository-structure">Repository structure</a></li>
<li><a href="#how-to-build">How to build</a></li>
<li><a href="#sample-apps">Sample apps</a>
<ul class="sectlevel3">
<li><a href="#net-web-interoperability-sample">.NET/web interoperability sample</a></li>
<li><a href="#how-to-find-sample-code">How to find sample code</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#guides">Guides</a>
<ul class="sectlevel2">
<li><a href="#quick-starts">Quick starts</a>
<ul class="sectlevel3">
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#quick-start-web">Quick Start - Web</a>
<ul class="sectlevel4">
<li><a href="#run-example">Run example</a></li>
<li><a href="#modify-example">Modify example</a></li>
</ul>
</li>
<li><a href="#quick-start-dotnet">Quick Start - .NET</a>
<ul class="sectlevel4">
<li><a href="#run-example-2">Run example</a></li>
<li><a href="#modify-example-2">Modify example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#concepts">Concepts</a>
<ul class="sectlevel3">
<li><a href="#discovery-flow">Discovery flow</a></li>
<li><a href="#high-level-architecture">High-level architecture</a></li>
<li><a href="#key-elements">Key elements</a></li>
<li><a href="#interop-broker">Interop Broker</a></li>
</ul>
</li>
<li><a href="#tools">Tools</a>
<ul class="sectlevel3">
<li><a href="#plexus-command-line-interface-cli">Plexus Command Line Interface (CLI)</a>
<ul class="sectlevel4">
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
</ul>
</li>
<li><a href="#plexus-studio">Plexus Studio</a>
<ul class="sectlevel4">
<li><a href="#invoke-action-workflow">Invoke action workflow</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#invocation-workflow">Invocation workflow</a></li>
<li><a href="#plexus-interop-integration-workflow">Plexus Interop integration workflow</a></li>
<li><a href="#guides-how-to-write-custom-app-launcher">How to write custom App Launcher</a>
<ul class="sectlevel3">
<li><a href="#example-definition-of-electronapplauncher">Example definition of ElectronAppLauncher</a></li>
</ul>
</li>
<li><a href="#guides-system-requirements">System requirements</a>
<ul class="sectlevel3">
<li><a href="#supported-windows-versions">Supported Windows versions</a></li>
<li><a href="#supported-mac-os-x-versions">Supported Mac OS X versions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#reference">Reference</a>
<ul class="sectlevel2">
<li><a href="#components-overview">Components Overview</a></li>
<li><a href="#concepts-and-definitions">Concepts and Definitions</a>
<ul class="sectlevel3">
<li><a href="#application">Application</a></li>
<li><a href="#application-instance">Application Instance</a></li>
<li><a href="#interop-registry">Interop Registry</a></li>
<li><a href="#broker">Broker</a></li>
<li><a href="#application-lifecycle-manager">Application Lifecycle Manager</a></li>
<li><a href="#application-launcher">Application Launcher</a></li>
<li><a href="#client">Client</a></li>
<li><a href="#client-message-marshaller">Client Message Marshaller</a></li>
<li><a href="#generated-client-api">Generated Client API</a></li>
<li><a href="#generic-client-api">Generic Client API</a>
<ul class="sectlevel4">
<li><a href="#send-unary-request">Send Unary Request</a></li>
<li><a href="#register-unary-handler">Register Unary Handler</a></li>
<li><a href="#discover-methods">Discover Methods</a></li>
<li><a href="#discover-services">Discover Services</a></li>
<li><a href="#send-server-streaming-request">Send Server Streaming Request</a></li>
<li><a href="#register-server-streaming-handler">Register Server Streaming Handler</a></li>
<li><a href="#send-bidirectional-streaming-request">Send Bidirectional Streaming Request</a></li>
<li><a href="#register-bidirectional-streaming-handler">Register Bidirectional Streaming Handler</a></li>
</ul>
</li>
<li><a href="#interop-protocol">Interop Protocol</a></li>
<li><a href="#transport-protocol">Transport Protocol</a></li>
<li><a href="#transport-connection">Transport Connection</a></li>
<li><a href="#transport-channel">Transport Channel</a></li>
<li><a href="#wire-protocol">Wire Protocol</a></li>
<li><a href="#wire-connection">Wire Connection</a></li>
</ul>
</li>
<li><a href="#app-registry">App Registry</a></li>
<li><a href="#reference-metadata-definition-language">Interop Registry</a>
<ul class="sectlevel3">
<li><a href="#messages-and-services">Messages and Services</a></li>
<li><a href="#application-interop-manifests">Application Interop Manifests</a>
<ul class="sectlevel4">
<li><a href="#consumes">Consumes</a></li>
<li><a href="#provides">Provides</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="getting-started">Getting Started</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview">Overview</h3>
<div class="paragraph">
<p>The <strong>Plexus Interop</strong> project aims to define an open standard for desktop application interoperability and provides
reference implementation of this standard. It formalizes connections between applications within a single user session
on client desktop through a central broker.</p>
</div>
<div class="paragraph">
<p>The main goal is to enable development of extensible workflows connecting independent apps developed by different
organizations in different technologies (.NET, Web, Java, Python, etc.) by passing relevant context  (structured
data objects) between those apps.</p>
</div>
<div class="paragraph">
<p>Although the industry is moving towards containerized desktop applications, Plexus Interop recognizes that much
of the application landscape is not yet tied to containers and is architecturally agnostic of container implementation.
Separating interoperability from the container provides notable advantages: different containers can be leveraged in
the same workflow, and launched applications residing outside of containers can participate in interop activities.</p>
</div>
<div class="paragraph">
<p>Technically speaking, Plexus Interop is a metadata-centric language-agnostic desktop app-to-app interoperability
framework with an extensible model for launching new instances of desktop applications on demand. Its extensibility
is based on open standards which are essential parts of the project.  The architecture is based around central broker
providing hub-and-spoke connectivity between apps and brokering strongly-typed RPC-style calls between them. The broker
has a connection to an Application Lifecycle Manager (or Launcher) which is capable of creating new instances of apps
based on the their runtime-metadata (e.g. container type, launch command, command line parameters) defined in a registry.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/architecture.png" alt="Key components and high level architecture">
</div>
</div>
</div>
<div class="sect2">
<h3 id="features">Features</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Communicate across desktop applications</strong>. Allows communication between apps running in different processes, developed by different teams, and in different programming languages.</p>
</li>
<li>
<p><strong>Decouple desktop apps from each other and discover services dynamically</strong>. All interop calls are going through the central broker which works as a mediator decoupling apps from each other. Apps can discover each other in run time using different search criteria.</p>
</li>
<li>
<p><strong>Launch apps on demand</strong>. Interop broker tracks the lifecycle of desktop applications, i.e. it knows whether app is running or not and can launch app when required.</p>
</li>
<li>
<p><strong>Define strongly-typed interop APIs</strong>. Reference implementation uses popular <a href="https://developers.google.com/protocol-buffers/">Google Protobuf</a> format for defining APIs and serializing messages. Strong-typing and using of industry-wide standard allows easy integration between different apps.</p>
</li>
<li>
<p><strong>Store APIs in central repository, control their usage and evolution</strong>. All API definitions, as well as explicit per-app declaration of provided and consumed services, are supposed to be stored in the central interop repository. Central repository allows defining standards for communicating apps and common services on user desktop, granular control on usage and evolution of APIs.</p>
</li>
<li>
<p><strong>Use different messaging patterns</strong>. Supports request-response RPC pattern for common cases, as well as broadcast and bi-directional streaming patterns for more complex scenarios.</p>
</li>
<li>
<p><strong>Easy deploy and distribute into enterprise environments</strong>. Deployment is very simple, does not require administrative permissions, supports <a href="#guides-system-requirements">all major enterprise operating systems</a> and terminal services.</p>
</li>
<li>
<p><strong>Communicate securely using different transports</strong>. Uses local-only communication channels. Two transports are supported at the moment: "websockets" transport best suited for web apps and "named pipes" best suited for desktop apps.</p>
</li>
<li>
<p><strong>Extend where required</strong>. Can be adjusted to your needs via extension points. It&#8217;s possible to introduce new interop transport and serialization protocols, support custom authentication and authorization, different app startup flows and new programming languages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#guides">Guides</a> section for the more detailed description of what is Plexus Interop and how it works.</p>
</div>
</div>
<div class="sect2">
<h3 id="repository-structure">Repository structure</h3>
<div class="paragraph">
<p>Plexus Interop repository consist of the following main sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/finos-plexus/plexus-interop/tree/master/desktop">desktop</a> - Interop Broker, .NET Interop Client and sample apps implemented in C# using <a href="https://www.microsoft.com/net/download/core">.NET Core 2.0</a></p>
</li>
<li>
<p><a href="https://github.com/finos-plexus/plexus-interop/tree/master/web">web</a> - Web Interop Client and sample apps implemented in <a href="https://www.typescriptlang.org/">TypeScript</a></p>
</li>
<li>
<p><a href="https://github.com/finos-plexus/plexus-interop/tree/master/dsl">dsl</a> - <a href="https://developers.google.com/protocol-buffers/">Protobuf</a> and Plexus Interop grammar parsers, validators and code-generators implemented using <a href="https://eclipse.org/Xtext/">Xtext framework</a></p>
</li>
<li>
<p><a href="https://github.com/finos-plexus/plexus-interop/tree/master/docs">docs</a> - project documentation implemented in <a href="http://asciidoc.org/">AsciiDoc</a> format using <a href="http://asciidoctor.org/">Asciidoctor</a> processor</p>
</li>
<li>
<p><a href="https://github.com/finos-plexus/plexus-interop/tree/master/protocol">protocol</a> - definitions of Plexus Interop internal protocol messages in <a href="https://developers.google.com/protocol-buffers/">Protobuf</a> format</p>
</li>
<li>
<p><a href="https://github.com/finos-plexus/plexus-interop/tree/master/samples">samples</a> - sample interop metadata</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="how-to-build">How to build</h3>
<div class="paragraph">
<p>To build Plexus Interop components on your machine clone the repository and run <a href="https://gradle.org/">Gradle</a> build command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">git clone https://github.com/finos-plexus/plexus-interop.git
cd plexus-interop
gradlew build --console plain --no-daemon</code></pre>
</div>
</div>
<div class="paragraph">
<p>Build artifacts are saved into <code>bin</code> directory :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>win-x86/broker</code> - binaries of interop broker</p>
</li>
<li>
<p><code>win-x86/samples</code> - sample apps</p>
</li>
<li>
<p><code>win-x86/sdk</code> - code generator tool</p>
</li>
<li>
<p><code>docs</code> - documentation in HTML format</p>
</li>
<li>
<p><code>nuget</code> - .NET NuGet packages to be used in apps</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="sample-apps">Sample apps</h3>
<div class="sect3">
<h4 id="net-web-interoperability-sample">.NET/web interoperability sample</h4>
<div class="paragraph">
<p>This sample demonstrates interoperability calls between .NET Core console apps and web app running in Electron. As an example let us test how request-response and discovery work:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build samples - see <a href="#how-to-build">How to build</a> for details</p>
</li>
<li>
<p>Go to <code>bin/win-x86/samples/greeting</code> directory</p>
</li>
<li>
<p>Launch Interop Broker – <code>LaunchBroker.cmd</code></p>
</li>
<li>
<p>Launch sample "Greeting Client" app – <code>LaunchGreetingClient.cmd</code></p>
</li>
<li>
<p>Choose “Discovery” option (5) first and then “Greeting from Electron Web app” option from discovery response:</p>
<div class="imageblock">
<div class="content">
<img src="images/sample-1.png" alt="Sample-1">
</div>
</div>
</li>
<li>
<p>Enter some name (e.g. “John”) and press Enter. Broker will launch "Web Greeting Server" app, which is configured to run in Electron container.
Once launched the app will show the information about connection and incoming request and will send back a greeting response:</p>
<div class="imageblock">
<div class="content">
<img src="images/sample-2.png" alt="Sample-2">
</div>
</div>
</li>
<li>
<p>"Greeting Client" app should receive the greeting and print it:</p>
<div class="imageblock">
<div class="content">
<img src="images/sample-3.png" alt="Sample-3">
</div>
</div>
</li>
<li>
<p>Now choose Discovery (5) option in "Greeting Client" again and this time select “Greeting from .Net app” option from discovery results.</p>
</li>
<li>
<p>Enter another name, e.g. “Mike” and press enter. Broker will start a ".NET Greeting Server"console app. Once running this app will print information about the incoming request and will send back the greeting:</p>
<div class="imageblock">
<div class="content">
<img src="images/sample-4.png" alt="Sample-4">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You may check other call types by choosing other options in the "Greeting Client" app.</p>
</div>
</div>
<div class="sect3">
<h4 id="how-to-find-sample-code">How to find sample code</h4>
<div class="paragraph">
<p>Source code for sample flow is here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sample Interop Registry - <a href="https://github.com/finos-plexus/plexus-interop/tree/master/samples/greeting/registry/" class="bare">https://github.com/finos-plexus/plexus-interop/tree/master/samples/greeting/registry/</a></p>
</li>
<li>
<p>.NET Greeting Client - <a href="https://github.com/finos-plexus/plexus-interop/master/desktop/src/Plexus.Interop.Samples.GreetingClient/Program.cs" class="bare">https://github.com/finos-plexus/plexus-interop/master/desktop/src/Plexus.Interop.Samples.GreetingClient/Program.cs</a></p>
</li>
<li>
<p>.NET Greeting Server - <a href="https://github.com/finos-plexus/plexus-interop/tree/master/desktop/src/Plexus.Interop.Samples.GreetingServer/Program.cs" class="bare">https://github.com/finos-plexus/plexus-interop/tree/master/desktop/src/Plexus.Interop.Samples.GreetingServer/Program.cs</a></p>
</li>
<li>
<p>Web Greeting Server - <a href="https://github.com/finos-plexus/plexus-interop/tree/master/web/packages/web-example/src/greeting/server/Main.ts" class="bare">https://github.com/finos-plexus/plexus-interop/tree/master/web/packages/web-example/src/greeting/server/Main.ts</a></p>
</li>
<li>
<p>Electron App Launcher - <a href="https://github.com/finos-plexus/plexus-interop/tree/master/web/packages/electron-launcher/src/launcher/" class="bare">https://github.com/finos-plexus/plexus-interop/tree/master/web/packages/electron-launcher/src/launcher/</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="guides">Guides</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="quick-starts">Quick starts</h3>
<div class="paragraph">
<p>In this section we will be going through the case of two simple business apps communicating with each other via Plexus Interop:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CcyPairRateProvider</code> - an app developed by Vendor A, which provides FX currency pair rates.</p>
</li>
<li>
<p><code>CcyPairRateViewer</code> - an app developed by Vendor B, which allows user to request FX currency pair rates from other apps and see them.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Two most popular cases for interoperability are web and .NET, so the guide is split into two independent sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#quick-start-web">Web (TypeScript)</a></p>
</li>
<li>
<p><a href="#quick-start-dotnet">.NET (C#)</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both guides describe the same flow/API, so if you want to experiment with interop between different technologies - just combine the samples, e.g. take web implementation of <code>CcyPairRateViewer</code> from the first guide and
.NET implementation of <code>CcyPairRateProvider</code> from the second guide and run them together.</p>
</div>
<div class="sect3">
<h4 id="prerequisites">Prerequisites</h4>
<div class="paragraph">
<p>You will need the following software:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Windows 7+</p>
</li>
<li>
<p><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">JDK 8+</a></p>
</li>
<li>
<p><a href="https://nodejs.org/en/download/">Node.js 6+ with npm 3+</a> for Web quick start</p>
</li>
<li>
<p><a href="https://www.microsoft.com/net/download/core">.NET Core SDK 2.0+</a> for .NET quick start</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You also need to build Plexus Interop components if you have not done it yet. See <a href="#how-to-build">How to build</a> for details.</p>
</div>
</div>
<div class="sect3">
<h4 id="quick-start-web">Quick Start - Web</h4>
<div class="paragraph">
<p>In this guide both consumer and provider are written in TypeScript language and run in <a href="https://electron.atom.io/">Electron</a> container.</p>
</div>
<div class="sect4">
<h5 id="run-example">Run example</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Switch to the <code>bin\win-x86\quick-start</code> directory and start a new broker instance:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">cd bin\win-x86\samples\quick-start
start plexus broker</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Broker requires two types of metadata to run:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>app registry</strong> - declares all available apps and how to launch them. App Lifecycle Manager component uses this registry to launch apps when requested.</p>
</li>
<li>
<p><strong>interop registry</strong> - declares messages, services, and which of them are provided or consumed by each application. Broker uses this information to provide discovery capabilities and validate invocations between apps.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default Interop Broker reads metadata from <code>apps.json</code> and <code>interop.json</code> files located in <code>metadata</code> sub-directory within broker&#8217;s working directory. In real world scenarios, broker will load registries from remote server instead of local files, because remote server may provide many capabilities like (admin UI, central governance, audit trail, entitlements, etc.).
To load metadata from other data sources you need to implement your own <strong>registry provider</strong> (documentation on that is in progress).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Each Interop Broker instance is identified by its working directory. It is possible to run many brokers in parallel,
but instance must run in a separate directory.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Launch <code>WebCcyPairRateViewer</code> app:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">plexus launch vendor_b.fx.WebCcyPairRateViewer</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>plexus launch</code> command sends a request to <strong>App Lifecycle Manager</strong> to make some app up and running. App Lifecycle Manager is a part of the broker that
tracks which apps are alive and can create a new instance of an app if there is no live one. Different app types may have very different life cycles, so App Lifecycle Manager launches new app instances and tracks their status using <strong>App Launchers</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>App window will open. In this window you should see "Connected to Broker" message.</p>
</li>
<li>
<p>Enter a currency pair name (e.g. "EURUSD") and click "Get Rate" button:</p>
<div class="imageblock">
<div class="content">
<img src="images/quick-start-web-1.png" alt="Quick Start Web 1">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When app A calls an interop service hosted in app B the following steps happen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Broker searches for the already connected live service providers</p>
</li>
<li>
<p>If service provider is offline, broker inspects <strong>App Registry</strong> and sends a launch request to <strong>App Lifecycle Manager</strong>.</p>
</li>
<li>
<p>While app is starting broker waits (with some timeout)</p>
</li>
<li>
<p>Service provider within the launched app connects to the broker and registers itself</p>
</li>
<li>
<p>Broker sends interop message to the service provider</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#guides-interop-invocation-workflow">Invocation Workflow</a> section for details.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This guide uses a sample <code>ElectronAppLauncher</code>. To understand how to build custom launchers see <a href="#guides-how-to-write-custom-app-launcher">How to write custom app launcher</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Broker starts "CCY Rate Provider" app and forwards request to it. App shows information about the request and sends back a random value.</p>
<div class="imageblock">
<div class="content">
<img src="images/quick-start-web-2.png" alt="Quick Start Web 2">
</div>
</div>
</li>
<li>
<p>The "CCY Rate Viewer" app shows the rate received from provider:</p>
<div class="imageblock">
<div class="content">
<img src="images/quick-start-web-3.png" alt="Quick Start Web 3">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="modify-example">Modify example</h5>
<div class="paragraph">
<p>Let us add real-time updates of FX rates instead of a single response. For this we have to change the contract between two apps, provide updated interop metadata to the broker, update apps and run them again.</p>
</div>
<div class="sect5">
<h6 id="modify-metadata">Modify metadata</h6>
<div class="paragraph">
<p>First we need to modify interop registry and pass updated metadata to the broker.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <code>registry/fx/ccy_pair_rate_service.proto</code> file and add a new <code>GetRateStream</code> method:</p>
<div class="listingblock">
<div class="title">/registry/fx/ccy_pair_rate_service.proto</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php">service <span class="constant">CcyPairRateService</span> {
    rpc <span class="constant">GetRate</span>(<span class="constant">CcyPair</span>) returns (<span class="constant">CcyPairRate</span>);

    <span class="comment">// new rpc call returning real-time notification stream</span>
    rpc <span class="constant">GetRateStream</span>(<span class="constant">CcyPair</span>) returns (stream <span class="constant">CcyPairRate</span>);
}</code></pre>
</div>
</div>
</li>
<li>
<p>Open <code>registry/vendor_a/fx/web_ccy_pair_rate_provider.interop</code> file and change provided method to <code>GetRateStream</code>:</p>
<div class="listingblock">
<div class="title">/registry/vendor_a/fx/web_ccy_pair_rate_provider.interop</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php">package vendor_a.fx;

import <span class="string"><span class="delimiter">&quot;</span><span class="content">fx/ccy_pair_rate_service.proto</span><span class="delimiter">&quot;</span></span>;

application <span class="constant">WebCcyPairRateProvider</span> {
    provides .fx.<span class="constant">CcyPairRateService</span> {
        <span class="constant">GetRateStream</span> [title = <span class="string"><span class="delimiter">&quot;</span><span class="content">Web Provider - Get Rate Stream</span><span class="delimiter">&quot;</span></span>];
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Open <code>registry/vendor_b/fx/web_ccy_pair_rate_viewer.interop</code> file and change consumed method to <code>GetRateStream</code>:</p>
<div class="listingblock">
<div class="title">/registry/vendor_b/fx/web_ccy_pair_rate_viewer.interop</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php">package vendor_b.fx;

import <span class="string"><span class="delimiter">&quot;</span><span class="content">fx/ccy_pair_rate_service.proto</span><span class="delimiter">&quot;</span></span>;

application <span class="constant">WebCcyPairRateViewer</span> {
    consumes .fx.<span class="constant">CcyPairRateService</span> { <span class="constant">GetRateStream</span>; }
}</code></pre>
</div>
</div>
</li>
<li>
<p>To pass the changed metadata to broker, navigate back to <code>bin\win-x86\samples\quick-start</code> and re-generate metadata using <strong>plexusgen</strong> tool:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">java -jar ../../sdk/plexusgen.jar --type=json_meta --baseDir=registry --out=metadata</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Broker tracks <code>interop.json</code> file and automatically reloads metadata when the file is changed.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="modify-and-build-provider-app">Modify and build provider app</h6>
<div class="paragraph">
<p>We changed provided service definition, so now we need to re-generate provider&#8217;s client and provide implementation for new method:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From project root call <strong>Plexus Generator</strong> tool to re-generate provider&#8217;s client code:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">java -jar bin/win-x86/sdk/plexusgen.jar --type=ts --baseDir=./bin/win-x86/samples/quick-start/registry --input=web_ccy_pair_rate_provider.interop --out=./web/packages/ccy-pair-rate-provider/src/gen --protoc=./web/node_modules/.bin/pbts.cmd</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Plexus Generator tool will generate interfaces and proxy classes from service descriptions. It uses <a href="https://github.com/dcodeIO/protobuf.js/tree/master/cli">ProtobufJs</a> to generate message definitions from <code>.proto</code> files.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Open <code>web/packages/ccy-pair-rate-provider/src/index.ts</code> file and change <code>onGetRate</code> implementation to <code>onGetRateStream</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">new</span> WebCcyPairRateProviderClientBuilder()
    .withClientDetails({
        <span class="key">applicationId</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">vendor_a.fx.WebCcyPairRateProvider</span><span class="delimiter">&quot;</span></span>,
        <span class="key">applicationInstanceId</span>: instanceId
    })
    .withTransportConnectionProvider(() =&gt; <span class="keyword">new</span> WebSocketConnectionFactory(<span class="keyword">new</span> WebSocket(webSocketUrl)).connect())
    .withCcyPairRateServiceInvocationsHandler({
        <span class="key">onGetRateStream</span>: async (invocationContext, ccyPair, hostClient) =&gt; {
            log(<span class="error">`</span>Received Streaming request <span class="keyword">for</span> <span class="predefined">$</span>{ccyPair.ccyPairName} Rate<span class="error">`</span>);
            <span class="comment">// send several rates and complete the invocation</span>
            let count = <span class="integer">5</span>;
            const sendResponse = () =&gt; {
                <span class="keyword">if</span> (count) {
                    count--;
                    hostClient.next(rateService.getRate(ccyPair.ccyPairName));
                    setTimeout(sendResponse, <span class="integer">1000</span>);
                } <span class="keyword">else</span> {
                    hostClient.complete();
                }
            };
            sendResponse();
        }
    })
    .connect()
    .then(() =&gt; log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Connected to Broker</span><span class="delimiter">&quot;</span></span>))
    .<span class="keyword">catch</span>(e =&gt; console.error(<span class="string"><span class="delimiter">&quot;</span><span class="content">Connection failure</span><span class="delimiter">&quot;</span></span>, e));</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In this example provider will send five rates and then will close the stream.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Navigate to <code>web/packages/ccy-pair-rate-provider</code> directory and run <code>npm run build</code> to re-build the app.</p>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="modify-and-build-consumer-app">Modify and build consumer app</h6>
<div class="paragraph">
<p>Because interop method was changed we also need to re-generate consumer&#8217;s client code and modify how response is handled:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From project root call <strong>Plexus Generator</strong> tools to re-generate consumer&#8217;s client code:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">java -jar bin/win-x86/sdk/plexusgen.jar --type=ts --baseDir=./bin/win-x86/samples/quick-start/registry --input=web_ccy_pair_rate_viewer.interop --out=./web/packages/ccy-pair-rate-viewer/src/gen --protoc=./web/node_modules/.bin/pbts.cmd</code></pre>
</div>
</div>
</li>
<li>
<p>Open <code>web/packages/ccy-pair-rate-viewer/src/index.ts</code> and update code to invoke streaming <code>getRateStream</code> action:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">new</span> WebCcyPairRateViewerClientBuilder()
    .withClientDetails({
        <span class="key">applicationId</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">vendor_b.fx.WebCcyPairRateViewer</span><span class="delimiter">&quot;</span></span>,
        <span class="key">applicationInstanceId</span>: instanceId
    })
    .withTransportConnectionProvider(
        () =&gt; <span class="keyword">new</span> WebSocketConnectionFactory(<span class="keyword">new</span> WebSocket(webSocketUrl)).connect()
    )
    .connect()
    .then(async (rateViewerClient: WebCcyPairRateViewerClient) =&gt; {
        log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Connected to Broker</span><span class="delimiter">&quot;</span></span>);
        window.getRate = async () =&gt; {
            const ccyPair = (document.getElementById(<span class="string"><span class="delimiter">&quot;</span><span class="content">ccyPair</span><span class="delimiter">&quot;</span></span>) as HTMLInputElement).value;
            log(<span class="error">`</span>Sending request <span class="keyword">for</span> <span class="predefined">$</span>{ccyPair}<span class="error">`</span>);
            rateViewerClient.getCcyPairRateServiceProxy()
                .getRateStream({<span class="key">ccyPairName</span>: ccyPair}, {
                    <span class="key">next</span>: ccyRate =&gt; {
                        log(<span class="error">`</span>Received rate <span class="predefined">$</span>{ccyRate.ccyPairName} - <span class="predefined">$</span>{ccyRate.rate}<span class="error">`</span>);
                    },
                    <span class="key">complete</span>: () =&gt; log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Completed</span><span class="delimiter">&quot;</span></span>),
                    <span class="key">error</span>: () =&gt; log(<span class="string"><span class="delimiter">&quot;</span><span class="content">Error received</span><span class="delimiter">&quot;</span></span>)
                });
        };
    });</code></pre>
</div>
</div>
</li>
<li>
<p>Navigate to <code>web/packages/ccy-pair-rate-viewer</code> and run <code>npm run build</code> to re-build the app.</p>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="launch-the-modified-example">Launch the modified example</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to <code>bin\win-x86\samples\quick-start</code></p>
</li>
<li>
<p>Launch the viewer app:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">plexus launch vendor_b.fx.WebCcyPairRateViewer</code></pre>
</div>
</div>
</li>
<li>
<p>In the opened window enter a currency pair name, e.g. <code>EURUSD</code> and press <code>Enter</code>:</p>
<div class="imageblock">
<div class="content">
<img src="images/quick-start-web-6.png" alt="Quick Start Web 6">
</div>
</div>
</li>
<li>
<p>Broker starts the provider app and redirects request to it:</p>
<div class="imageblock">
<div class="content">
<img src="images/quick-start-web-5.png" alt="Quick Start Web 5">
</div>
</div>
</li>
<li>
<p>The viewer app shows five rates received from provider and a message that reply stream was closed:</p>
<div class="imageblock">
<div class="content">
<img src="images/quick-start-web-4.png" alt="Quick Start Web 4">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="quick-start-dotnet">Quick Start - .NET</h4>
<div class="paragraph">
<p>In this guide both consumer and provider are .NET console apps written in C# language running under <a href="https://www.microsoft.com/net/download/core#/runtime">.NET Core</a>.</p>
</div>
<div class="sect4">
<h5 id="run-example-2">Run example</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Switch to the <code>bin\win-x86\quick-start</code> directory and start a new broker instance:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">cd bin\win-x86\samples\quick-start
start plexus broker</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Broker requires two types of metadata to run:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>app registry</strong> - declares all available apps and how to launch them. App Lifecycle Manager component uses this registry to launch apps when requested.</p>
</li>
<li>
<p><strong>interop registry</strong> - declares messages, services, and which of them are provided or consumed by each application. Broker uses this information to provide discovery capabilities and validate invocations between apps.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default Interop Broker reads metadata from <code>apps.json</code> and <code>interop.json</code> files located in <code>metadata</code> sub-directory within broker&#8217;s working directory. In real world scenarios, broker will load registries from remote server instead of local files, because remote server may provide many capabilities like (admin UI, central governance, audit trail, entitlements, etc.).
To load metadata from other data sources you need to implement your own <strong>registry provider</strong> (documentation on that is in progress).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Each Interop Broker instance is identified by its working directory. It is possible to run many brokers in parallel,
but instance must run in a separate directory.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Launch "CCY Pair Viewer" app:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">plexus launch vendor_b.fx.CcyPairRateViewer</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>plexus launch</code> command sends a request to <strong>App Lifecycle Manager</strong> to make some app up and running. App Lifecycle Manager is a part of the broker that
tracks which apps are alive and can create a new instance of an app if there is no live one. Different app types may have very different life cycles, so App Lifecycle Manager launches new app instances and tracks their status using <strong>App Launchers</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In this example apps are launched using built-in <code>NativeAppLauncher</code> which run apps as standard OS processes.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>In the opened console window enter a currency pair name, e.g. <code>EURUSD</code> and press <code>Enter</code>:</p>
<div class="imageblock">
<div class="content">
<img src="images/quick-start-dotnet-1.png" alt="Quick Start .NET 1">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When app A calls an interop service hosted in app B the following steps happen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Broker searches for the already connected live service providers</p>
</li>
<li>
<p>If service provider is offline, broker inspects <strong>App Registry</strong> and sends a launch request to <strong>App Lifecycle Manager</strong>.</p>
</li>
<li>
<p>While app is starting broker waits (with some timeout)</p>
</li>
<li>
<p>Service provider within the launched app connects to the broker and registers itself</p>
</li>
<li>
<p>Broker sends interop message to the service provider</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="#guides-interop-invocation-workflow">Invocation Workflow</a> section for details.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that <code>CcyPairRateProvider</code> app uses the same <code>NativeAppLauncher</code> as the viewer app.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Once <code>CcyPairRateProvider</code> app is up and running it registers in Broker, receives the message from viewer app and sends back a random rate:</p>
<div class="imageblock">
<div class="content">
<img src="images/quick-start-dotnet-2.png" alt="Quick Start .NET 2">
</div>
</div>
</li>
<li>
<p>The viewer app shows the rate received from provider:</p>
<div class="imageblock">
<div class="content">
<img src="images/quick-start-dotnet-3.png" alt="Quick Start .NET 3">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="modify-example-2">Modify example</h5>
<div class="paragraph">
<p>Let us add real-time updates of FX rates instead of a single response. For this we have to change the contract between two apps, provide updated interop metadata to the broker, update apps and run them again.</p>
</div>
<div class="sect5">
<h6 id="modify-metadata-2">Modify metadata</h6>
<div class="paragraph">
<p>First we need to modify interop registry and pass updated metadata to the broker.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open <code>registry/fx/ccy_pair_rate_service.proto</code> file and add new <code>GetRateStream</code> method:</p>
<div class="listingblock">
<div class="title">/registry/fx/ccy_pair_rate_service.proto</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php">service <span class="constant">CcyPairRateService</span> {
    rpc <span class="constant">GetRate</span>(<span class="constant">CcyPair</span>) returns (<span class="constant">CcyPairRate</span>);

    <span class="comment">// new rpc call returning real-time notification stream</span>
    rpc <span class="constant">GetRateStream</span>(<span class="constant">CcyPair</span>) returns (stream <span class="constant">CcyPairRate</span>);
}</code></pre>
</div>
</div>
</li>
<li>
<p>Open <code>registry/vendor_a/fx/ccy_pair_rate_provider.interop</code> file and change provided method to <code>GetRateStream</code>:</p>
<div class="listingblock">
<div class="title">/registry/vendor_a/fx/ccy_pair_rate_provider.interop</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php">package vendor_a.fx;

import <span class="string"><span class="delimiter">&quot;</span><span class="content">fx/ccy_pair_rate_service.proto</span><span class="delimiter">&quot;</span></span>;

application <span class="constant">CcyPairRateProvider</span> {
    provides .fx.<span class="constant">CcyPairRateService</span> {
        <span class="constant">GetRateStream</span> [title = <span class="string"><span class="delimiter">&quot;</span><span class="content">.NET Provider - Get Rate Stream</span><span class="delimiter">&quot;</span></span>];
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Open <code>registry/vendor_b/fx/ccy_pair_rate_viewer.interop</code> file and change consumed method to <code>GetRateStream</code>:</p>
<div class="listingblock">
<div class="title">/registry/vendor_b/fx/ccy_pair_rate_viewer.interop</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php">package vendor_b.fx;

import <span class="string"><span class="delimiter">&quot;</span><span class="content">fx/ccy_pair_rate_service.proto</span><span class="delimiter">&quot;</span></span>;

application <span class="constant">CcyPairRateViewer</span> {
    consumes .fx.<span class="constant">CcyPairRateService</span> { <span class="constant">GetRateStream</span>; }
}</code></pre>
</div>
</div>
</li>
<li>
<p>To pass updated metadata to the broker, go back to <code>bin\win-x86\samples\quick-start</code> directory and re-generate metadata using <strong>Plexus Generator</strong> tool:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">java -jar ../../sdk/plexusgen.jar --type=json_meta --baseDir=registry --out=metadata</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Broker tracks <code>interop.json</code> file and automatically reloads metadata file is modified.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="modify-and-build-provider-app-2">Modify and build provider app</h6>
<div class="paragraph">
<p>Now let us update CcyPairRateProvider app to provide real-time notifications.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the <code>desktop/src/Plexus.Interop.Samples.CcyPairRateProvider</code> directory and call <code>Generate.cmd</code></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Plexus Generator tool generates interfaces and proxy classes from service descriptions.
Internally it uses <a href="https://github.com/google/protobuf/releases/latest">protobuf compiler</a> to generate C# message definitions from <code>.proto</code> files.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Open <code>Program.cs</code> file and update the code to provide implementation of the new method:</p>
<div class="listingblock">
<div class="title">/desktop/src/Plexus.Interop.Samples.CcyPairRateProvider/Program.cs</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">namespace Plexus.Interop.Samples.CcyPairRateProvider
{
    using Plexus.Interop.Samples.CcyPairRateProvider.Generated;
    using <span class="predefined-type">System</span>;
    using <span class="predefined-type">System</span>.IO;
    using <span class="predefined-type">System</span>.Threading.Tasks;
    using Plexus.Channels;

    <span class="directive">public</span> sealed <span class="type">class</span> <span class="class">Program</span> : CcyPairRateProviderClient.ICcyPairRateServiceImpl
    {
        <span class="directive">private</span> readonly <span class="predefined-type">Random</span> _random = <span class="keyword">new</span> <span class="predefined-type">Random</span>();

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> Main(string<span class="type">[]</span> args)
        {
            <span class="keyword">new</span> Program().MainAsync(args).GetAwaiter().GetResult();
        }

        <span class="directive">public</span> async Task MainAsync(string<span class="type">[]</span> args)
        {
            <span class="comment">// Read broker working dir specified either in the first</span>
            <span class="comment">// command line argument or in environment variable,</span>
            <span class="comment">// or just use current working directory.</span>
            var brokerWorkingDir = args.Length &gt; <span class="integer">0</span>
                ? args[<span class="integer">0</span>]
                : EnvironmentHelper.GetBrokerWorkingDir() ?? Directory.GetCurrentDirectory();

            <span class="comment">// Creating client and connecting to broker</span>
            Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Connecting to broker {0}</span><span class="delimiter">&quot;</span></span>, brokerWorkingDir);
            var client = <span class="keyword">new</span> CcyPairRateProviderClient(<span class="local-variable">this</span>, setup =&gt; setup.WithBrokerWorkingDir(brokerWorkingDir));
            await client.ConnectAsync();
            Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Connected. Waiting for requests. Press CTRL+C to disconnect.</span><span class="delimiter">&quot;</span></span>);
            Console.CancelKeyPress += (sender, eventArgs) =&gt;
            {
                eventArgs.Cancel = <span class="predefined-constant">true</span>;
                client.Disconnect();
            };

            <span class="comment">// Awaiting completion</span>
            await client.Completion;
            Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Disconnected.</span><span class="delimiter">&quot;</span></span>);
        }

        <span class="comment">// Implementation of server streaming method GetRateStream</span>
        <span class="directive">public</span> async Task GetRateStream(
            CcyPair request,
            IWritableChannel&lt;CcyPairRate&gt; responseStream,
            MethodCallContext context)
        {
            Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Received subscription: {0}</span><span class="delimiter">&quot;</span></span>, request);
            <span class="keyword">try</span>
            {
                <span class="keyword">do</span>
                {
                    var response = GetCcyPairRate(request);
                    Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Sending response: {0}</span><span class="delimiter">&quot;</span></span>, response);
                    await responseStream.TryWriteAsync(response, context.CancellationToken);
                    await Task.Delay(_random.Next(<span class="integer">1000</span>, <span class="integer">3000</span>), context.CancellationToken);
                } <span class="keyword">while</span> (!context.CancellationToken.IsCancellationRequested);
            }
            <span class="keyword">catch</span> (OperationCanceledException) when (context.CancellationToken.IsCancellationRequested)
            {
                <span class="comment">// Ignoring cancellation exception</span>
            }
            Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Subscription completed</span><span class="delimiter">&quot;</span></span>);
        }

        <span class="directive">private</span> CcyPairRate GetCcyPairRate(CcyPair request)
        {
            CcyPairRate response;
            <span class="keyword">switch</span> (request.CcyPairName)
            {
                <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">EURUSD</span><span class="delimiter">&quot;</span></span>:
                    response = <span class="keyword">new</span> CcyPairRate
                    {
                        CcyPairName = <span class="string"><span class="delimiter">&quot;</span><span class="content">EURUSD</span><span class="delimiter">&quot;</span></span>,
                        Rate = <span class="float">1.15</span> + <span class="float">0.05</span> * _random.NextDouble()
                    };
                    <span class="keyword">break</span>;
                <span class="keyword">case</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">EURGBP</span><span class="delimiter">&quot;</span></span>:
                    response = <span class="keyword">new</span> CcyPairRate
                    {
                        CcyPairName = <span class="string"><span class="delimiter">&quot;</span><span class="content">EURGBP</span><span class="delimiter">&quot;</span></span>,
                        Rate = <span class="float">0.87</span> + <span class="float">0.05</span> * _random.NextDouble()
                    };
                    <span class="keyword">break</span>;
                <span class="keyword">default</span>:
                    <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentOutOfRangeException(<span class="error">$</span><span class="string"><span class="delimiter">&quot;</span><span class="content">Unknown currency pair: {request.CcyPairName}</span><span class="delimiter">&quot;</span></span>);
            }

            <span class="keyword">return</span> response;
        }
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Re-build the app by executing the following command:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>dotnet build</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="modify-and-build-consumer-app-2">Modify and build consumer app</h6>
<div class="paragraph">
<p>Now let us update "CCY Pair Rate Viewer" app to handle multiple incoming real-time updates.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the <code>desktop/src/Plexus.Interop.Samples.CcyPairRateViewer</code> directory and call <code>Generate.cmd</code></p>
</li>
<li>
<p>Navigate to the <code>desktop/src/Plexus.Interop.Samples.CcyPairRateViewer</code> directory, open <code>Program.cs</code> file and update the code to the following:</p>
<div class="listingblock">
<div class="title">/desktop/src/Plexus.Interop.Samples.CcyPairRateViewer/Program.cs</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">namespace Plexus.Interop.Samples.CcyPairRateViewer
{
    using Plexus.Interop.Samples.CcyPairRateViewer.Generated;
    using <span class="predefined-type">System</span>;
    using <span class="predefined-type">System</span>.IO;
    using <span class="predefined-type">System</span>.Threading.Tasks;

    <span class="directive">public</span> sealed <span class="type">class</span> <span class="class">Program</span>
    {
        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> Main(string<span class="type">[]</span> args)
        {
            <span class="keyword">new</span> Program().MainAsync(args).GetAwaiter().GetResult();
        }

        <span class="directive">public</span> async Task MainAsync(string<span class="type">[]</span> args)
        {
            <span class="comment">// Read broker working dir specified either in the first</span>
            <span class="comment">// command line argument or in environment variable,</span>
            <span class="comment">// or just use current working directory.</span>
            var brokerWorkingDir = args.Length &gt; <span class="integer">0</span>
                ? args[<span class="integer">0</span>]
                : EnvironmentHelper.GetBrokerWorkingDir() ?? Directory.GetCurrentDirectory();

            <span class="comment">// Creating client and connecting to broker</span>
            Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Connecting to broker {0}</span><span class="delimiter">&quot;</span></span>, brokerWorkingDir);
            var client = <span class="keyword">new</span> CcyPairRateViewerClient(setup =&gt; setup.WithBrokerWorkingDir(brokerWorkingDir));
            await client.ConnectAsync();
            Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Connected</span><span class="delimiter">&quot;</span></span>);

            <span class="keyword">while</span> (<span class="predefined-constant">true</span>)
            {
                Console.Write(<span class="string"><span class="delimiter">&quot;</span><span class="content">Enter currency pair (e.g. </span><span class="char">\&quot;</span><span class="content">EURUSD</span><span class="char">\&quot;</span><span class="content">) or press Enter to exit: </span><span class="delimiter">&quot;</span></span>);
                var ccyPairName = Console.ReadLine();
                <span class="keyword">if</span> (string.IsNullOrEmpty(ccyPairName))
                {
                    <span class="keyword">break</span>;
                }

                <span class="comment">// Requesting ccy pair rate from another app</span>
                var request = <span class="keyword">new</span> CcyPair { CcyPairName = ccyPairName };
                var call = client.CcyPairRateService.GetRateStream(request);

                ConsoleCancelEventHandler cancelHandler = <span class="predefined-constant">null</span>;
                cancelHandler = (sender, eventArgs) =&gt;
                {
                    Console.CancelKeyPress -= cancelHandler;
                    Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Unsubscribing</span><span class="delimiter">&quot;</span></span>);
                    eventArgs.Cancel = <span class="predefined-constant">true</span>;
                    call.Cancel();
                };

                Console.CancelKeyPress += cancelHandler;

                await call.ResponseStream
                    .ConsumeAsync(item =&gt;
                    {
                        Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Notification received: {0}</span><span class="delimiter">&quot;</span></span>, (object)item);
                        Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Press CTRL+C to unscubscribe</span><span class="delimiter">&quot;</span></span>);
                    })
                    .IgnoreAnyCancellation();
            }

            Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Disconnecting</span><span class="delimiter">&quot;</span></span>);
            await client.DisconnectAsync();
            Console.WriteLine(<span class="string"><span class="delimiter">&quot;</span><span class="content">Disconnected</span><span class="delimiter">&quot;</span></span>);
        }
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Re-build the app by executing the following command:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>dotnet build</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="launch-the-modified-example-2">Launch the modified example</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Launch "CCY Pair Rate Viewer":</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">plexus launch vendor_b.fx.CcyPairRateViewer</code></pre>
</div>
</div>
</li>
<li>
<p>In the opened console window enter a currency pair name, e.g. <code>EURUSD</code> and press <code>Enter</code>:</p>
<div class="imageblock">
<div class="content">
<img src="images/quick-start-dotnet-4.png" alt="Quick Start .NET 4">
</div>
</div>
</li>
<li>
<p>Broker starts "CCY Pair Rate Provider" app and redirects request to it:</p>
<div class="imageblock">
<div class="content">
<img src="images/quick-start-dotnet-5.png" alt="Quick Start .NET 5">
</div>
</div>
</li>
<li>
<p>The viewer app will show rate updates coming from provider until you press <code>CTRL-C</code>:</p>
<div class="imageblock">
<div class="content">
<img src="images/quick-start-dotnet-6.png" alt="Quick Start .NET 6">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="concepts">Concepts</h3>
<div class="paragraph">
<p>Like many other Remote Procedure Call (RPC) systems, Plexus Interop is based around the idea of defining a service by
specifying the methods that can be called remotely with their parameters and return types.</p>
</div>
<div class="paragraph">
<p>There are 4 possible types of RPC methods in Plexus Interop mirroring types supported by
<a href="http://www.grpc.io/docs/guides/concepts.html#rpc-life-cycle">gRPC</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Unary call - consumer send a request, provider receives it, handles, and sends response back to the consumer.</p>
</li>
<li>
<p>Consumer streaming call - consumer sends one or many requests, provider sends only one response back.</p>
</li>
<li>
<p>Provider streaming call - consumer sends one request, provider sends many responses back.</p>
</li>
<li>
<p>Bidirectional streaming call - consumer sends many requests, provider sends many responses.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However Plexus Interop goes beyond what most RPC frameworks do:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Plexus tracks the lifecycle of desktop apps, i.e. it knows if app is running or not and can launch app on demand.</p>
</li>
<li>
<p>Plexus allows to define custom App Launchers, which allow fully custom installation, startup and shutdown flows.</p>
</li>
<li>
<p>Each app specified which interop services it provides and consumes. This way it is easy to track API usage and evolve APIs.</p>
</li>
<li>
<p>Central Broker decouples apps from each other and allows dynamic discovery of service providers.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="discovery-flow">Discovery flow</h4>
<div class="paragraph">
<p>Step one: find API implementations:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/diag-c1232bd1e1db9ff2851b63035ddd135d.png" alt="diag c1232bd1e1db9ff2851b63035ddd135d" width="476" height="155">
</div>
</div>
<div class="paragraph">
<p>Step two: select between API implementations</p>
</div>
<div class="paragraph">
<p>Step three: call specific API implementer:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/diag-52f1bb1b83534f00e415763f59166d7b.png" alt="diag 52f1bb1b83534f00e415763f59166d7b" width="499" height="172">
</div>
</div>
</div>
<div class="sect3">
<h4 id="high-level-architecture">High-level architecture</h4>
<div class="imageblock">
<div class="content">
<img src="images/diag-e24370232956d904dd9be81530041a27.png" alt="diag e24370232956d904dd9be81530041a27" width="979" height="691">
</div>
</div>
</div>
<div class="sect3">
<h4 id="key-elements">Key elements</h4>
<div class="ulist">
<ul>
<li>
<p><strong>App Registry</strong> - catalogue of apps, interop components within apps and <em>app launchers</em></p>
</li>
<li>
<p><strong>App Launcher</strong> - component responsible for starting new app instances and tracking their lifecycle. Different app launchers should be used for different app technologies (e.g. .NET Launcher, Java Launcher, Python Launcher) or custom startup flows (e.g. launcher that knows how to download app from a special binary storage within organization).</p>
</li>
<li>
<p><strong>App Lifecycle Manager</strong> - central component that tracks all live app instances. All apps are started via App Lifecycle Managers, which selects an appropriate App Launcher and uses this Launcher to create a new instance of the app.</p>
</li>
<li>
<p><strong>Interop API Definitions</strong> - text files with formal definitions of interop APIs between apps, which define <em>messages</em>, <em>services</em> and <em>applications</em>:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Message</strong> - logical record of information, containing a series of name-value pairs (fields). Plexus uses Protobuf v3 protocol for defining and serializing messages.</p>
</li>
<li>
<p><strong>Service</strong> - set of related methods that can be provided by one or many applications. Plexus uses Protobuf v3 definition language syntax for defining services.</p>
</li>
<li>
<p><strong>Application</strong> - corresponds to a desktop application. Each application can provide services to other applications and consume services provided by other applications.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Interop Broker</strong> - responsible for managing interop sessions, routing messages between apps and discovery mechanisms. If message was sent to component that is not running yet then Broker asks App Launcher to start the app using mapping between components and apps.</p>
</li>
<li>
<p><strong>Interop Registry</strong> - provides Interop Broker with all information about services, messages and connections between apps in run-time. Interop Registry is populated from <strong>approved</strong> Interop API Definitions.</p>
</li>
<li>
<p><strong>App Registry</strong> - provides App Lifecycle Manager with all information about how to launch apps: app launcher and launcher-specific parameters.</p>
</li>
<li>
<p><strong>Interop Transport</strong> - responsible for delivering serialized messages between Interop Broker and client interop APIs</p>
</li>
<li>
<p><strong>Client Service API</strong> - client library that app uses to provide some interop service or to consume interop service provided by another app. Service API is generated from interop API definitions. Depending on app technology API can be generated either in run-time (e.g. JavaScript) or in compile time (e.g. DLLs for .NET). Compile-time generation uses Plexus SDK tools.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="interop-broker">Interop Broker</h4>
<div class="paragraph">
<p>Interop broker is the central component working as a hub for all interop communications:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/diag-287668115a1ab17e8f15e719c561a1d0.png" alt="diag 287668115a1ab17e8f15e719c561a1d0" width="461" height="320">
</div>
</div>
<div class="paragraph">
<p>Interop Broker has several responsibilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It reads full information about all interoperability APIs from Interop Registry</p>
</li>
<li>
<p>It routes interop API calls and replies between app instances</p>
</li>
<li>
<p>It tracks which interop API implementations are alive. If some app calls a service which is not online yet then Broker launches service provider app via App Lifecycle Manager.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that Interop Broker is not talking with apps directly - it relies on Interop Transport, which can deliver serialized messages across app boundaries.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tools">Tools</h3>
<div class="paragraph">
<p>This section describes available tools which simplify development and testing process.</p>
</div>
<div class="sect3">
<h4 id="plexus-command-line-interface-cli">Plexus Command Line Interface (CLI)</h4>
<div class="paragraph">
<p>Plexus Command Line Interface used for metadata validation and generating the strong-typed client code in different languages.</p>
</div>
<div class="sect4">
<h5 id="installation">Installation</h5>
<div class="paragraph">
<p>Plexus CLI tool can be installed using following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">npm i @plexus-interop/cli --global</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you work in restricted environment, then please consider adjusting following environment properties before installation:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment variable name</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PLEXUS_JRE_DOWNLOAD_URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom JRE package download URL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PLEXUS_CLI_JAVA_EXE_PATH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full path to <em>java</em> executable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PLEXUS_PROTOC_DOWNLOAD_URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom Proto Compiler package download url</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PLEXUS_CLI_PROTOC_EXE_PATH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full path to <em>protoc</em> executable</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="usage">Usage</h5>
<div class="paragraph">
<p>To list all available commands please use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">plexus --help</code></pre>
</div>
</div>
<div class="paragraph">
<p>it will print all commands with their descriptions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">  Usage: plexus [options] [command]

  Options:

    -V, --version             output the version number
    -h, --help                output usage information

  Commands:

    gen-ts [options]          generate Typescript client and messages definitions for specified entry point
    gen-json-meta [options]   generate metadata in JSON format
    gen-proto [options]       generate proto definitions for specified entry point
    gen-csharp [options]      generate C# client and messages definitions for specified entry point
    validate [options]        validate metadata
    validate-patch [options]  validate metadata update

  Help for specific command:  plexus [command] --help</code></pre>
</div>
</div>
<div class="paragraph">
<p>to get help for specific command please use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">plexus [command] --help</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="plexus-studio">Plexus Studio</h4>
<div class="paragraph">
<p>Plexus Studio is a development tool to explore and test Plexus Interop APIs defined in metadata. It can connect to Plexus Interop on behalf of any available application, handles invocations and executes any consumed action.</p>
</div>
<div class="sect4">
<h5 id="invoke-action-workflow">Invoke action workflow</h5>
<div class="paragraph">
<p>Let&#8217;s take a look at simple workflow of simulating action invocation. It provides an ability to test your Provider application without installing/getting any information about possible Consumer applications. To invoke action please follow steps below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Find required application in the list and click it to connect on behalf of this Application:</p>
<div class="imageblock">
<div class="content">
<img src="images/guide-studio-apps.png" alt="Plexus Studio Apps">
</div>
</div>
</li>
<li>
<p>Choose required Action from <strong>Consumed Services</strong> section</p>
<div class="imageblock">
<div class="content">
<img src="images/guide-studio-app-consumer.png" alt="Plexus Studio Consumer">
</div>
</div>
</li>
<li>
<p>On <strong>Consumed Action</strong> screen you can:</p>
<div class="ulist">
<ul>
<li>
<p>Specify request payload in <a href="https://developers.google.com/protocol-buffers/docs/proto3#json">JSON format</a></p>
</li>
<li>
<p>Discover available action providers</p>
</li>
<li>
<p>Choose target application</p>
</li>
<li>
<p>Send request and get response details</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/guide-studio-app-consumed.png" alt="Plexus Studio Consumed action">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="invocation-workflow">Invocation workflow</h3>
<div id="guides-interop-invocation-workflow" class="imageblock">
<div class="content">
<img src="images/diag-358efcd3faf7abf2e00ef1083673940d.png" alt="diag 358efcd3faf7abf2e00ef1083673940d" width="1874" height="552">
</div>
</div>
<div class="paragraph">
<p>Here is the most interesting scenario, which includes app launch:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When Desktop Plexus is started it creates transport endpoints and start listen for incoming connections.</p>
</li>
<li>
<p>Plexus Interop launches app A and provides it with the configuration on how to connect to transport servers.</p>
</li>
<li>
<p>App A initializes Client APIs and connects to Broker. Client and Broker performs handshake after which Broker registers the connected instance start tracking it.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now user wants to send some information from app A into another app B available in Plexus. Here is what happens in app A:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>App A creates an input message instance using builder provided by Client API library</p>
</li>
<li>
<p>App A calls service method in Client API and passes created message instance</p>
</li>
<li>
<p>Client API performs several steps:</p>
<div class="ulist">
<ul>
<li>
<p>Creates header which contains information about the invocation: sender, receiver, service name, method name etc.</p>
</li>
<li>
<p>Serializes the created header via Protobuf and submits into Interop Transport for sending</p>
</li>
<li>
<p>Serializes the created input message into binary stream using Protobuf and submits into Interop Transport for sending</p>
</li>
<li>
<p>Transport splits the incoming message stream into one or more frames and send them to the pipe</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Plexus Host process is doing the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Interop Transport reads binary stream from transport and re-constructs headers and messages from received frames.</p>
</li>
<li>
<p>When new <strong>header</strong> arrives Transport starts to build new message blob from frames related to the message</p>
</li>
<li>
<p>Once header and message blobs are constructed, Transport passes them into Interop Broker</p>
</li>
<li>
<p>Interop Broker deserializes header blob and checks information about message receiver</p>
</li>
<li>
<p>If target app is not running then Interop Broker sends "launch app" event to App Launcher with the ID of app B and waits</p>
</li>
<li>
<p>App Launcher starts target app B. After launch app B will:</p>
<div class="ulist">
<ul>
<li>
<p>Register callback for process API calls</p>
</li>
<li>
<p>Register its instance in Interop Broker (same as app A)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Interop Broker detects that app B is live and sends message into it using Transport</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now that message is sent to app B via transport remaining part is easy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Interop Transport within app B restores message blob and passes it into Client API</p>
</li>
<li>
<p>Client API deserializes blob into strongly typed message and invokes callback registered by app B code</p>
</li>
<li>
<p>App B processes the message and sends reply using same approach as original request, but in reverse direction</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="plexus-interop-integration-workflow">Plexus Interop integration workflow</h3>
<div class="paragraph">
<p>Typical development cycle for integration with Plexus Interop:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/diag-5d068d7005ef3b3fabcfa81d9515e4bd.png" alt="diag 5d068d7005ef3b3fabcfa81d9515e4bd" width="810" height="691">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clone existing interop API definitions (metadata) from remote central registry</p>
</li>
<li>
<p>Define new interop metadata locally</p>
</li>
<li>
<p>Generate client interop APIs from local metadata</p>
</li>
<li>
<p>Integrate generated interop APIs into the app</p>
</li>
<li>
<p>Publish new metadata into local "sandbox" registry</p>
</li>
<li>
<p>Test interop flow via Plexus Studio:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If app provides service then you can call it from Plexus Studio.</p>
</li>
<li>
<p>If app consumes some service then you can check that app sends correct interop messages into Plexus Studio.</p>
</li>
<li>
<p>Repeat steps 2-5 until you are fully happy with API and its implementation.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Deploy new version of the app with new interop flow</p>
</li>
<li>
<p>Publish interop metadata into central registry for approval</p>
</li>
<li>
<p>Once new metadata is approved it should get into central Interop Registry and become available to all users</p>
</li>
<li>
<p>Test flow between apps end-to-end in real environment</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="guides-how-to-write-custom-app-launcher">How to write custom App Launcher</h3>
<div class="paragraph">
<p>App Launchers are just applications which implements the special contract called <code>interop.AppLauncherService</code>.</p>
</div>
<div class="paragraph">
<p>To implement custom app launcher need to do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Define new application in interop registry that provides service <code>interop.AppLauncherService</code> service to <code>interop.AppLifecycleManager</code>. See example below.</p>
</li>
<li>
<p>Generate client API for the application.</p>
</li>
<li>
<p>Implement methods defined by <code>interop.AppLauncherService</code>.</p>
</li>
<li>
<p>Register the new app in App Registry. Use built-in <code>interop.NativeAppLauncher</code> as a launcher for it. See example below.</p>
</li>
<li>
<p>Use environment variables to get broker location and instance id for connection.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>How does this work?
If app launcher is not started yet, Interop Broker will start it and pass environment variables "PLEXUS_APP_INSTANCE_ID" and "PLEXUS_BROKER_WORKING_DIR".
First variable should be used in connection message 'AppInstanceId' property to let broker know the connecting instance is the one it is waiting for.
The second variable defines broker location. Transports should check the directory "%PLEXUS_BROKER_WORKING_DIR%\servers\&lt;servername&gt;" to get connectivity details.
For example, websocket server connection URL is specified in "%PLEXUS_BROKER_WORKING_DIR%\servers\ws-v1\address".</p>
</div>
<div class="sect3">
<h4 id="example-definition-of-electronapplauncher">Example definition of ElectronAppLauncher</h4>
<div class="listingblock">
<div class="title">AppLauncherService.proto</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php">syntax = <span class="string"><span class="delimiter">&quot;</span><span class="content">proto3</span><span class="delimiter">&quot;</span></span>;

package interop;

import <span class="string"><span class="delimiter">&quot;</span><span class="content">interop/UniqueId.proto</span><span class="delimiter">&quot;</span></span>;

service <span class="constant">AppLauncherService</span> {
        rpc <span class="constant">Launch</span>(<span class="constant">AppLaunchRequest</span>) returns (<span class="constant">AppLaunchResponse</span>);
}

message <span class="constant">AppLaunchRequest</span> {
        <span class="predefined-type">string</span> app_id = <span class="integer">1</span>;
        <span class="predefined-type">string</span> launch_params_json = <span class="integer">2</span>;
}

message <span class="constant">AppLaunchResponse</span> {
        <span class="constant">UniqueId</span> app_instance_id = <span class="integer">1</span>;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ElectronAppLauncher.interop</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php">import <span class="string"><span class="delimiter">&quot;</span><span class="content">interop/AppLauncherService.proto</span><span class="delimiter">&quot;</span></span>;

package interop;

application <span class="constant">ElectronAppLauncher</span> {

        provides <span class="constant">AppLauncherService</span> to interop.<span class="constant">AppLifecycleManager</span> { <span class="constant">Launch</span>; }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">apps.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js">{
      <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">interop.ElectronAppLauncher</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Electron App Launcher</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">launcherId</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">interop.NativeAppLauncher</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">launcherParams</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">cmd</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">../ElectronAppLauncher.cmd</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">args</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
      }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="guides-system-requirements">System requirements</h3>
<div class="sect3">
<h4 id="supported-windows-versions">Supported Windows versions</h4>
<div class="ulist">
<ul>
<li>
<p>Windows 7 SP1</p>
</li>
<li>
<p>Windows 8.1</p>
</li>
<li>
<p>Windows 10</p>
</li>
<li>
<p>Windows Server 2008 R2 SP1</p>
</li>
<li>
<p>Windows Server 2012 SP1</p>
</li>
<li>
<p>Windows Server 2012 R2 SP1</p>
</li>
<li>
<p>Windows Server 2016</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="supported-mac-os-x-versions">Supported Mac OS X versions</h4>
<div class="paragraph">
<p>Not supported for now. Will be added soon.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reference">Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="components-overview">Components Overview</h3>
<div class="imageblock">
<div class="content">
<img src="images/desktop-interop-layers.png" alt="desktop interop layers">
</div>
</div>
<div class="paragraph">
<p>Plexus Interop consist of the following main components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Broker - a process running on user desktop which handles application connections and routes calls between them</p>
</li>
<li>
<p>Client - technology-specific library used by applications to communicate with broker</p>
</li>
<li>
<p>Interop DSL - language to define connections between applications and associated tooling for parsing, validation and
code-generation of application-specific client APIs from these definitions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To participate in interop each application need to define itself in Interop Registry and auto-generate its specific
client API using code-generation tool. Broker also uses Interop Registry to validate and route calls.</p>
</div>
<div class="paragraph">
<p>Both client and broker use transport protocol and interop protocol to communicate with each other. Broker can support
one or more interop and transport protocols. Currently it supports version 1 of interop protocol and 2 versions of
transport protocols: named-pipe-based and websocket-based.</p>
</div>
</div>
<div class="sect2">
<h3 id="concepts-and-definitions">Concepts and Definitions</h3>
<div class="paragraph">
<p>This section contains overview diagram which shows Plexus Interop layers on example of 2 applications interoperating
through broker. Below this diagram you can find brief descriptions for each of the presented concepts.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/desktop-interop-concepts.png" alt="desktop interop concepts">
</div>
</div>
<div class="sect3">
<h4 id="application">Application</h4>
<div class="paragraph">
<p>Application is a program on client desktop which can be started and stopped. Each application can provide (i.e. implement)
services and/or consume (i.e. call) services provided by other applications.</p>
</div>
<div class="paragraph">
<p>Application is not necessary correspond to OS process. It can be a part of process, or consist of many processes.</p>
</div>
<div class="paragraph">
<p>Examples of applications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A program with GUI</p>
</li>
<li>
<p>A program without GUI, e.g. Windows Service</p>
</li>
<li>
<p>A part of process, e.g. a plugin running in a big container application consisting of many isolated plugins</p>
</li>
<li>
<p>A web window or worker running in Electron.js or other web container</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="application-instance">Application Instance</h4>
<div class="paragraph">
<p>Application instance is a running (started) application. There can be many instances of the same application running
simultaneously on client desktop.</p>
</div>
</div>
<div class="sect3">
<h4 id="interop-registry">Interop Registry</h4>
<div class="paragraph">
<p>Interop registry defines strong-typed contracts between applications on client desktop using a special human-readable
interface definition language.</p>
</div>
<div class="paragraph">
<p>It consist of definitions of the following types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Message definitions</strong> represent types of data which can be sent between applications.</p>
</li>
<li>
<p><strong>Service definitions</strong> represent named sets of related methods which can be implemented by applications. Service can
contain one or many methods and each method is defined by its name, type, and types of request and response.</p>
</li>
<li>
<p><strong>Application definitions</strong> declare which service implementations are provided and which consumed
by each application participating in desktop interop.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Broker loads Interop Registry from server on launch and re-loads it on changes. This allows adding new services to
user desktops in runtime.</p>
</div>
<div class="paragraph">
<p>Interop Registry enables dynamic service discovery. Applications are only connected to broker and call services rather
than other applications. This concept is similar to dynamic injection containers available in almost any language and
framework, but here it is used on a higher level. Broker dynamically searches for a suitable service implementation
across all the applications in Interop Registry. Because of this applications are always de-coupled from each other,
they don&#8217;t need to know about counter-parties implementation details and they can release separately.</p>
</div>
</div>
<div class="sect3">
<h4 id="broker">Broker</h4>
<div class="paragraph">
<p>Broker is the central part of desktop interop. Broker accepts, authenticates and tracks application (client) connections,
validates and routes calls between them, and optionally can trigger launch of application on demand through
App Lifecycle Manager.</p>
</div>
<div class="paragraph">
<p>Broker listens to one or many wire protocol servers to accept client connections. Applications can use any of the
listened wire protocol implementations to establish connection with broker.</p>
</div>
<div class="paragraph">
<p>Application instance is considered "online" while it has at least one established connection with broker. Broker
uniquely identifies each connection and tracks it, so it always knows which apps are online in any given time.</p>
</div>
<div class="paragraph">
<p>Online applications instances can send protocol requests to broker to discover or call service implementations provided
by other applications. Broker validates and routes such calls to target applications according to interop registry.</p>
</div>
</div>
<div class="sect3">
<h4 id="application-lifecycle-manager">Application Lifecycle Manager</h4>
<div class="paragraph">
<p>Component inside Broker which tracks active connections and can trigger launch of an application on demand by sending a
request to the appropriate Application Launcher.</p>
</div>
</div>
<div class="sect3">
<h4 id="application-launcher">Application Launcher</h4>
<div class="paragraph">
<p>Application launchers are applications which can launch other applications. This concept was introduced to allow easy
implementation of custom launch workflows which can be very different. E.g. web application is loaded in a browser window,
native application started as a new OS process and plugin is loaded by its container application. In addition each vendor
usually has custom launch steps like auto-updating or accepting terms &amp; conditions. Such steps can also be implemented
in a vendor-specific app launcher.</p>
</div>
<div class="paragraph">
<p>On method call broker can either route the call to an online application instance or trigger launch of a new
instance. There are several strategies of routing launch requests from Broker to App Launcher, called <em>Launch Behaviors</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Default</strong> - Pass invocation to already running provider instance or launch new one if no online providers found.</p>
</li>
<li>
<p><strong>Always</strong> - Create new app instance on each invocation.</p>
</li>
<li>
<p><strong>Never</strong> - Pass invocation to already running instance, return error if no online providers found.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Launch Behaviors can be specified per action in Interop Registry, please see example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">application RateProviderApp {
    provides CcyPairBroadcastService {
        option launch_on_call = ALWAYS;
        GetRate;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each application can specify its Launcher in Interop Registry and broker will delegate launch to
the specified Launcher.</p>
</div>
</div>
<div class="sect3">
<h4 id="client">Client</h4>
<div class="paragraph">
<p>Client is a library used by application to communicate with interop broker. Client can be implemented in any language,
it communicates with broker using interop protocol, transport protocol and wire protocol.</p>
</div>
</div>
<div class="sect3">
<h4 id="client-message-marshaller">Client Message Marshaller</h4>
<div class="paragraph">
<p>Pluggable component used by client library to serialize and deserialize request/response messages.</p>
</div>
</div>
<div class="sect3">
<h4 id="generated-client-api">Generated Client API</h4>
<div class="paragraph">
<p>Application-specific and language-specific API which is auto-generated by code-generation tool based on Interop Registry.</p>
</div>
<div class="paragraph">
<p>For each consumed service a proxy class is generated which allows invocation of service methods.</p>
</div>
<div class="listingblock">
<div class="title">Executing action using generated  proxy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const rate: ICcyPairRate = client.getCcyRateService().getRate({ <span class="key">ccyPairName</span>: <span class="string"><span class="delimiter">'</span><span class="content">EURUSD</span><span class="delimiter">'</span></span> });</code></pre>
</div>
</div>
<div class="paragraph">
<p>For each provided service an interface is generated which should be implemented to provide implementations for service
methods.</p>
</div>
<div class="listingblock">
<div class="title">Registering handler for provided service</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">clientBuilder.withCcyRateServiceProvider({
    <span class="key">onGetRate</span>: (invocattionContext: InvocationContext, <span class="key">pair</span>: ICcyPair) =&gt; {
        <span class="keyword">return</span> internalService.getRate(pair);
    }
});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="generic-client-api">Generic Client API</h4>
<div class="paragraph">
<p>Technology-specific API implementation which provides core functionality of interop client. It converts method calls to interop
protocol messages and vice versa according to specification and uses pluggable transport implementation to
send/receive messages to/from broker.</p>
</div>
<div class="paragraph">
<p>Currently .NET and TypeScript/JavaScript libraries are provided as a part of this repository. Please see Web API definition with examples below.</p>
</div>
<div class="sect4">
<h5 id="send-unary-request">Send Unary Request</h5>
<div class="paragraph">
<p>Executes Point-to-Point invocation, client receives response from server.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">sendUnaryRequest&lt;Req, Res&gt;(
    invocationInfo: InvocationDescriptor,
    <span class="key">requestMessage</span>: Req,
    <span class="key">responseHandler</span>: ValueHandler&lt;Res&gt;): Promise&lt;InvocationClient&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
invocationInfo
</td>
<td class="hdlist2">
<p>details of remote action to execute</p>
</td>
</tr>
<tr>
<td class="hdlist1">
requestMessage
</td>
<td class="hdlist2">
<p>simple object representing request details</p>
</td>
</tr>
<tr>
<td class="hdlist1">
responseHandler
</td>
<td class="hdlist2">
<p>response/error handler</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Returns</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
invocationClient
</td>
<td class="hdlist2">
<p>provides ability to cancel invocation, to notificate remote side that response no longer required</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Examples</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Invoke remote action on any available provider:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const invocationInfo: InvocationDescriptor = {
    <span class="key">serviceId</span>: <span class="string"><span class="delimiter">'</span><span class="content">CcyRateService</span><span class="delimiter">'</span></span>,
    <span class="key">methodId</span>: <span class="string"><span class="delimiter">'</span><span class="content">GetRate</span><span class="delimiter">'</span></span>
};
const requestMessage = { <span class="key">ccyPairName</span>: <span class="string"><span class="delimiter">'</span><span class="content">EURUSD</span><span class="delimiter">'</span></span> };
client.sendUnaryRequest&lt;ICcyPair, ICcyPairRate&gt;(invocationInfo, requestMessage, {
    <span class="key">value</span>: pairRate =&gt; console.log(<span class="error">`</span>Received rate <span class="predefined">$</span>{pairRate.rate}<span class="error">`</span>),
    <span class="key">error</span>: e =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Failed to get rate</span><span class="delimiter">'</span></span>, e)
});</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Invoke remote action on particular provider:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const invocationInfo: InvocationDescriptor = {
    <span class="key">serviceId</span>: <span class="string"><span class="delimiter">'</span><span class="content">CcyRateService</span><span class="delimiter">'</span></span>,
    <span class="key">methodId</span>: <span class="string"><span class="delimiter">'</span><span class="content">GetRate</span><span class="delimiter">'</span></span>,
    <span class="comment">// provider's app id, defined in metadata</span>
    <span class="key">applicationId</span>: <span class="string"><span class="delimiter">'</span><span class="content">RateProvider</span><span class="delimiter">'</span></span>,
    <span class="comment">// optional, if we want to pass invocation to particular running instance</span>
    <span class="key">connectionId</span>: remoteAppGuid
};
<span class="comment">// same as in example above ...</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="register-unary-handler">Register Unary Handler</h5>
<div class="paragraph">
<p>Registers handler for provided unary method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">onUnary&lt;Req, Res&gt;(
    serviceInfo: ServiceInfo,
    <span class="key">handler</span>: UnaryInvocationHandler&lt;Req, Res&gt;): <span class="keyword">void</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
serviceInfo
</td>
<td class="hdlist2">
<p>implemented service details</p>
</td>
</tr>
<tr>
<td class="hdlist1">
handler
</td>
<td class="hdlist2">
<p>method details and provided implementation</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Examples</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Register unary invocation handler</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const serviceInfo = { <span class="key">serviceId</span>: <span class="string"><span class="delimiter">'</span><span class="content">CcyRateService</span><span class="delimiter">'</span></span> };
clientBuilder.onUnary&lt;ICcyPair, ICcyPairRate&gt;(serviceInfo, {
    <span class="key">methodId</span>: <span class="string"><span class="delimiter">'</span><span class="content">GetRate</span><span class="delimiter">'</span></span>,
    <span class="key">handle</span>: async (invocationContext: MethodInvocationContext, <span class="key">request</span>: ICcyPair) =&gt; {
        const rate: ICcyPairRate = await internalRateService.getRate(request.ccyPairName);
        <span class="keyword">return</span> rate;
    }
};</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="discover-methods">Discover Methods</h5>
<div class="paragraph">
<p>Discovers available method invocation handlers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">discoverMethod(discoveryRequest: MethodDiscoveryRequest): Promise&lt;MethodDiscoveryResponse&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
discoveryRequest
</td>
<td class="hdlist2">
<p>discover criteria, defined in <a href="https://github.com/finos-plexus/plexus-interop/blob/master/protocol/plexus.interop.proto">client protocol</a>. All fields are optional, providing flexibility to search under different criteria.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Returns</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
discoveryResponse
</td>
<td class="hdlist2">
<p>discovered remote method implementations if any, containing extensive information on method provider. Discovered method instances can be passed to corresponding invocation methods.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Examples</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Discover by input message and invoke first available implementation:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const discoveryResponse = await client.discoverMethod({
    <span class="key">inputMessageId</span>: <span class="string"><span class="delimiter">'</span><span class="content">plexus.interop.CcyPair</span><span class="delimiter">'</span></span>,
});
client.sendUnaryRequest&lt;ICcyPair, ICcyPairRate&gt;(
    discoveryResponse.methods[<span class="integer">0</span>],
    { <span class="key">ccyPairName</span>: <span class="string"><span class="delimiter">'</span><span class="content">EURUSD</span><span class="delimiter">'</span></span> },
    {
        <span class="key">value</span>: pairRate =&gt; console.log(<span class="error">`</span>Received rate <span class="predefined">$</span>{pairRate.rate}<span class="error">`</span>),
        <span class="key">error</span>: e =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Failed to get rate</span><span class="delimiter">'</span></span>, e)
    }
);</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>Discovery Request</strong> supports various of options, you can use any combinations of them.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Discover by response type:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const discoveryResponse = await client.discoverMethod({
    <span class="key">outputMessageId</span>: <span class="string"><span class="delimiter">'</span><span class="content">plexus.interop.CcyPairRate</span><span class="delimiter">'</span></span>
});</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Discover only online method handlers:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const discoveryResponse = await client.discoverMethod({
    <span class="key">outputMessageId</span>: <span class="string"><span class="delimiter">'</span><span class="content">plexus.interop.CcyPairRate</span><span class="delimiter">'</span></span>,
    <span class="key">discoveryMode</span>: DiscoveryMode.Online
});</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Discover by method reference:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const discoveryResponse = await client.discoverMethod({
    <span class="key">consumedMethod</span>: {
        <span class="key">consumedService</span>: {
            <span class="key">serviceId</span>: <span class="string"><span class="delimiter">'</span><span class="content">CcyRateService</span><span class="delimiter">'</span></span>
        },
        <span class="key">methodId</span>: <span class="string"><span class="delimiter">'</span><span class="content">GetRate</span><span class="delimiter">'</span></span>
    }
});</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Implementing "broadcast" communication using discovery.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using <code>discoveryMethod</code> as low level API we can easily implement sending of broadcast messages using following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Define method with <code>Empty</code> return type to be handled by listener components</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">service CcyPairBroadcastService {
    rpc onCcyPairRate (CcyPairRate) returns (Empty);
}</code></pre>
</div>
</div>
</li>
<li>
<p>Setup all listener apps as provider of this action. Also we can define specific Provider instances or even companies we would like to listen events from:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">application ListenerApp {
    <span class="comment">// listen to message from any provider</span>
    provides CcyPairBroadcastService {onCcyPairRate;}
    <span class="comment">// or setup listener for providers from specific namespace</span>
    <span class="comment">// provides CcyPairBroadcastService to com.acme.* {onCcyPairRate;}</span>
}</code></pre>
</div>
</div>
</li>
<li>
<p>Setup broadcast publisher app to consume this action</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">application RateProviderApp {
    consumes CcyPairBroadcastService {onCcyPairRate;}
}</code></pre>
</div>
</div>
</li>
<li>
<p>Use online discovery to publish new rate to all connected consumers:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">async <span class="keyword">function</span> <span class="function">broadcast</span>(rate: CcyPairRate): Promise&lt;<span class="keyword">void</span>&gt; {
    const discoveryResponse = await client.discoverMethod({
        <span class="key">consumedMethod</span>: {
            <span class="key">consumedService</span>: {
                <span class="key">serviceId</span>: <span class="string"><span class="delimiter">'</span><span class="content">CcyPairBroadcastService</span><span class="delimiter">'</span></span>
            },
            <span class="key">methodId</span>: <span class="string"><span class="delimiter">'</span><span class="content">onCcyPairRate</span><span class="delimiter">'</span></span>
        },
        <span class="key">discoveryMode</span>: DiscoveryMode.Online
    });
    const responseHandler = {
        <span class="key">value</span>: () =&gt; console.log(<span class="string"><span class="delimiter">'</span><span class="content">Delivered</span><span class="delimiter">'</span></span>)
    };
    discoveryResponse.methods.forEach(method =&gt; {
        client.sendUnaryRequest&lt;ICcyPairRate, Empty&gt;(
            method,
            rate,
            responseHandler);
    });
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="discover-services">Discover Services</h5>
<div class="paragraph">
<p>Discovers available service implementations. Provides ability to use few methods from particular provider together.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">discoverService(discoveryRequest: ServiceDiscoveryRequest): Promise&lt;ServiceDiscoveryResponse&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
discoveryRequest
</td>
<td class="hdlist2">
<p>discover criteria, defined in <a href="https://github.com/finos-plexus/plexus-interop/blob/master/protocol/plexus.interop.proto">client protocol</a>. All fields are optional, providing flexibility to search under different criteria.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Returns</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
discoveryResponse
</td>
<td class="hdlist2">
<p>discovered remote service implementations if any, containing extensive information on method provider. Discovered method instances can be passed to corresponding invocation methods.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Examples</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Discover service, lookup for pair of methods to be used together:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const discoveryResponse = client.discoverService({
    <span class="key">consumedService</span>: {
        <span class="key">serviceId</span>: <span class="string"><span class="delimiter">'</span><span class="content">CcyRateService</span><span class="delimiter">'</span></span>
    }
});
<span class="comment">// choose service implementation, by provider id/service alias/other details</span>
const service: DiscoveredService = serviceDiscoveryResponse
    .services
    .find(s =&gt; providedService.applicationId === <span class="string"><span class="delimiter">'</span><span class="content">RateProviderApp</span><span class="delimiter">'</span></span>);
<span class="comment">// choose required methods and invoke them as described above in 'Discover Methods' examples</span>
const getRateMethod = service.methods.find(m =&gt; m.methodId === <span class="string"><span class="delimiter">'</span><span class="content">GetRate</span><span class="delimiter">'</span></span>);
const getRateStreamMethod = service.methods.find(m =&gt; m.methodId === <span class="string"><span class="delimiter">'</span><span class="content">GetRateStream</span><span class="delimiter">'</span></span>);</code></pre>
</div>
</div>
</li>
<li>
<p>Discover only online service providers</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const discoveryResponse = client.discoverService({
    <span class="key">consumedService</span>: {
        <span class="key">serviceId</span>: <span class="string"><span class="delimiter">'</span><span class="content">CcyRateService</span><span class="delimiter">'</span></span>
    },
    <span class="key">discoveryMode</span>: DiscoveryMode.Online
});</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="send-server-streaming-request">Send Server Streaming Request</h5>
<div class="paragraph">
<p>Executes Server Streaming invocation, client receives stream of messages from server.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">sendServerStreamingRequest&lt;Req, Res&gt;(
    invocationInfo: InvocationDescriptor,
    <span class="key">requestMessage</span>: Req,
    <span class="key">responseObserver</span>: InvocationObserver&lt;Res&gt;): Promise&lt;InvocationClient&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
invocationInfo
</td>
<td class="hdlist2">
<p>details of remote action to execute</p>
</td>
</tr>
<tr>
<td class="hdlist1">
requestMessage
</td>
<td class="hdlist2">
<p>simple object representing request details</p>
</td>
</tr>
<tr>
<td class="hdlist1">
responseObserver
</td>
<td class="hdlist2">
<p>response stream observer</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Returns</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
invocationClient
</td>
<td class="hdlist2">
<p>provides ability to cancel invocation, to notificate remote side that response no longer required</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Examples</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Receive stream or rates from provider:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const invocationInfo: InvocationDescriptor = {
    <span class="key">serviceId</span>: <span class="string"><span class="delimiter">'</span><span class="content">CcyRateService</span><span class="delimiter">'</span></span>,
    <span class="key">methodId</span>: <span class="string"><span class="delimiter">'</span><span class="content">GetRateStream</span><span class="delimiter">'</span></span>
};
const requestMessage = { <span class="key">ccyPairName</span>: <span class="string"><span class="delimiter">'</span><span class="content">EURUSD</span><span class="delimiter">'</span></span> };
client.sendServerStreamingRequest&lt;ICcyPair, ICcyPairRate&gt;(invocationInfo, requestMessage, {
    <span class="key">next</span>: pairRate =&gt; console.log(<span class="error">`</span>Received rate <span class="predefined">$</span>{pairRate.rate}<span class="error">`</span>),
    <span class="key">complete</span>: () =&gt; console.log(<span class="string"><span class="delimiter">'</span><span class="content">Invocation completed</span><span class="delimiter">'</span></span>),
    <span class="key">error</span>: e =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Failed to get rate</span><span class="delimiter">'</span></span>, e)
});</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="register-server-streaming-handler">Register Server Streaming Handler</h5>
<div class="paragraph">
<p>Registers handler for provided server streaming method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">onServerStreaming&lt;Req, Res&gt;(
    serviceInfo: ServiceInfo,
    <span class="key">handler</span>: ServerStreamingInvocationHandler&lt;Req, Res&gt;): <span class="keyword">void</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
serviceInfo
</td>
<td class="hdlist2">
<p>implemented service details</p>
</td>
</tr>
<tr>
<td class="hdlist1">
handler
</td>
<td class="hdlist2">
<p>method details and provided implementation</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Examples</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Register stream handler:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const serviceInfo = { <span class="key">serviceId</span>: <span class="string"><span class="delimiter">'</span><span class="content">CcyRateService</span><span class="delimiter">'</span></span> };
clientBuilder.onServerStreaming&lt;ICcyPair, ICcyPairRate&gt;(serviceInfo, {
    <span class="key">methodId</span>: <span class="string"><span class="delimiter">'</span><span class="content">GetRateStream</span><span class="delimiter">'</span></span>,
    <span class="key">handle</span>: async (invocationContext: MethodInvocationContext,
            <span class="key">request</span>: ICcyPair,
            <span class="key">hostClient</span>: StreamingInvocationClient&lt;ICcyPairRate&gt;) =&gt; {
        const rate: ICcyPairRate = await internalRateService.getRate(request.ccyPairName);
        hostClient.next(rate);
        <span class="comment">// send other rate</span>
        const otherRate: ICcyPairRate = await internalRateService.getRate(request.ccyPairName);
        hostClient.next(otherRate);
        <span class="comment">// complete streaming</span>
        hostClient.complete();
    }
};</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="send-bidirectional-streaming-request">Send Bidirectional Streaming Request</h5>
<div class="paragraph">
<p>Executes Bidirectional Streaming invocation. Client and Server communicates using streams of messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">sendBidirectionalStreamingRequest&lt;Req, Res&gt;(
    invocationInfo: InvocationDescriptor,
    <span class="key">responseObserver</span>: InvocationObserver&lt;Res&gt;): Promise&lt;StreamingInvocationClient&lt;Req&gt;&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
invocationInfo
</td>
<td class="hdlist2">
<p>details of remote action to execute</p>
</td>
</tr>
<tr>
<td class="hdlist1">
responseObserver
</td>
<td class="hdlist2">
<p>response stream observer</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Returns</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
streamingInvocationClient
</td>
<td class="hdlist2">
<p>invocation client, provides ability to send stream of messages, complete or cancel invocation.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Examples</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bidirectional communication, client updates server on requested ccy pairs and receives stream of rates from server:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const invocationInfo: InvocationDescriptor = {
    <span class="key">serviceId</span>: <span class="string"><span class="delimiter">'</span><span class="content">CcyRateService</span><span class="delimiter">'</span></span>,
    <span class="key">methodId</span>: <span class="string"><span class="delimiter">'</span><span class="content">GetRateBidiStream</span><span class="delimiter">'</span></span>
};
const invocation = await client.sendBidirectionalStreamingRequest&lt;ICcyPair, ICcyPairRate&gt;(
    invocationInfo,
    {
        <span class="key">next</span>: pairRate =&gt; console.log(<span class="error">`</span>Received rate <span class="predefined">$</span>{pairRate.rate}<span class="error">`</span>),
        <span class="key">streamCompleted</span>: () =&gt; console.log(<span class="string"><span class="delimiter">'</span><span class="content">Remote stream completed</span><span class="delimiter">'</span></span>),
        <span class="key">complete</span>: () =&gt; console.log(<span class="string"><span class="delimiter">'</span><span class="content">Invocation completed</span><span class="delimiter">'</span></span>),
        <span class="key">error</span>: e =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Failed to get rate</span><span class="delimiter">'</span></span>, e)
    });
invocation.next({ <span class="key">ccyPairName</span>: <span class="string"><span class="delimiter">'</span><span class="content">EURUSD</span><span class="delimiter">'</span></span> });
<span class="comment">// ask for other ccy pair rates later</span>
invocation.next({ <span class="key">ccyPairName</span>: <span class="string"><span class="delimiter">'</span><span class="content">EURGBP</span><span class="delimiter">'</span></span> });
<span class="comment">// notify server that no more pairs be requested</span>
invocation.complete();</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="register-bidirectional-streaming-handler">Register Bidirectional Streaming Handler</h5>
<div class="paragraph">
<p>Registers handler for provided bidirectional streaming method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">onBidiStreaming&lt;Req, Res&gt;(
    serviceInfo: ServiceInfo,
    <span class="key">handler</span>: BidiStreamingInvocationHandler&lt;Req, Res&gt;): <span class="keyword">void</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Parameters</strong></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
serviceInfo
</td>
<td class="hdlist2">
<p>implemented service details</p>
</td>
</tr>
<tr>
<td class="hdlist1">
handler
</td>
<td class="hdlist2">
<p>method details and provided implementation</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Examples</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Register bidirectional handler:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const serviceInfo = { <span class="key">serviceId</span>: <span class="string"><span class="delimiter">'</span><span class="content">CcyRateService</span><span class="delimiter">'</span></span> };
clientBuilder.onBidiStreaming&lt;ICcyPair, ICcyPairRate&gt;(serviceInfo, {
    <span class="key">methodId</span>: <span class="string"><span class="delimiter">'</span><span class="content">GetRateStream</span><span class="delimiter">'</span></span>,
    <span class="key">handle</span>: (invocationContext: MethodInvocationContext,
            <span class="key">hostClient</span>: StreamingInvocationClient&lt;ICcyPairRate&gt;) =&gt; {
        const ccyPairs = [];
        <span class="comment">// send rate for each requested pair every second</span>
        setInterval(() =&gt; {
            ccyPairs.forEach(pair =&gt; {
                hostClient.next(internalRateService.getRate(pair)
            });
        }, <span class="integer">1000</span>);
        <span class="comment">// client's stream observer</span>
        <span class="keyword">return</span> {
            <span class="key">next</span>: ccyPair =&gt; ccyPairs.push(ccyPair)
        };
    }
};</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="interop-protocol">Interop Protocol</h4>
<div class="paragraph">
<p>Interop Protocol is a language for conversations between client and broker through transport channels.</p>
</div>
<div class="paragraph">
<p>Each interop protocol conversation is performed within a separate transport channel.</p>
</div>
<div class="paragraph">
<p>Protocol describes 4 main types of conversations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Connect handshake - the first conversation performed after new transport connection is established</p>
</li>
<li>
<p>Disconnect handshake - the last conversation performed before transport connection is closed</p>
</li>
<li>
<p>Discovery - request from application to broker to get the available services filtered by specific parameters</p>
</li>
<li>
<p>Method call - request from an application to call a method implemented in another application</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="transport-protocol">Transport Protocol</h4>
<div class="paragraph">
<p>Transport protocol is used to send binary messages between client and broker and is responsible for multiplexing and
de-multiplexing many channels through a single connection.</p>
</div>
</div>
<div class="sect3">
<h4 id="transport-connection">Transport Connection</h4>
<div class="paragraph">
<p>Transport connection is an abstraction of established connectivity between client and broker.</p>
</div>
<div class="paragraph">
<p>Connection is initiated by client and accepted by broker.</p>
</div>
<div class="paragraph">
<p>Transport implementation must detect if the connection is still alive, e.g. by sending heartbeats or using lower-level
wire protocol capabilities for this, and raise "disconnected" event on both sides when connectivity is lost.</p>
</div>
</div>
<div class="sect3">
<h4 id="transport-channel">Transport Channel</h4>
<div class="paragraph">
<p>Transport channel is a logical unit of data exchange through connection. It consist of request and response
byte streams on both sides of connection.</p>
</div>
<div class="paragraph">
<p>Channel opening can be initiated by both client and broker. It&#8217;s only possible to write and read bytes to/from
an opened channel. Many channels can be simultaneously opened in the context of the same connection.</p>
</div>
<div class="paragraph">
<p>For example, for each call from one application to another, 2 transport channels are opened. First is opened by source
application to broker. Second is opened by broker to target application. All the data sent in context of the call
is transferred through these 2 channels.</p>
</div>
<div class="paragraph">
<p>Bytes written to request stream on one side of channel can be read in exactly the same order from response stream
on another side. As soon as one of the sides sent all the data it closes request stream. This triggers
response stream completion event on another side as soon as all the sent bytes consumed.</p>
</div>
<div class="paragraph">
<p>Channel considered "Completed" when both sides completed request stream and consumed all the bytes from response stream.
Additionally it can be terminated by either client or broker with either "Failed" or "Canceled" status in case of
exception.</p>
</div>
</div>
<div class="sect3">
<h4 id="wire-protocol">Wire Protocol</h4>
<div class="paragraph">
<p>Wire protocol is an abstraction for sending bytes through cross-process boundaries. Any existing stream-based network
protocol such as named pipes or websockets can be used as a wire protocol for Plexus Interop.</p>
</div>
<div class="paragraph">
<p>Broker listens to many wire protocols simultaneously on different addresses, so each client can choose which one to use.
Usually for native apps it&#8217;s more convenient to use named pipes, but for web apps it&#8217;s more convenient to use websockets,
because most of browsers has built-in websockets support.</p>
</div>
</div>
<div class="sect3">
<h4 id="wire-connection">Wire Connection</h4>
<div class="paragraph">
<p>Wire connection is an abstraction of established cross-process connection.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="app-registry">App Registry</h3>
<div class="paragraph">
<p>Application registry is a JSON array where each item has following properties:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Application properties</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
<th class="tableblock halign-left valign-top"><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique key representing the application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"interop.samples.GreetingServer"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>displayName</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human readable display name of the application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"App which provides greetings to other apps"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>launcherId</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A reference to another application in the registry which starts this app</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"interop.NativeAppLauncher"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>launcherParams</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application launcher specific object which contains data required by launcher to launch the specific application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{
              "cmd": "../apps/GreetingServer/GreetingServer.exe",
              "args": "" }</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Find below a JSON schema for the application registry</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">array</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
            },
            <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
            },
            <span class="key"><span class="delimiter">&quot;</span><span class="content">launcherId</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
            },
            <span class="key"><span class="delimiter">&quot;</span><span class="content">launcherParams</span><span class="delimiter">&quot;</span></span>: {
                <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
                <span class="key"><span class="delimiter">&quot;</span><span class="content">additionalProperties</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
            }
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="reference-metadata-definition-language">Interop Registry</h3>
<div class="sect3">
<h4 id="messages-and-services">Messages and Services</h4>
<div class="paragraph">
<p>For messages and services definition Plexus uses Google Protobuf v3 format. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>package fx;

message CcyPair {
  string ccyPairName = 1;
}

message CcyPairRate {
  string ccyPairName = 1;
  double rate = 2;
}

service CcyPairRateService {
  rpc GetRate (CcyPair) returns (CcyPairRate);
}</pre>
</div>
</div>
<div class="paragraph">
<p>You can find Protobuf specification here - <a href="https://developers.google.com/protocol-buffers/docs/proto3" class="bare">https://developers.google.com/protocol-buffers/docs/proto3</a></p>
</div>
</div>
<div class="sect3">
<h4 id="application-interop-manifests">Application Interop Manifests</h4>
<div class="paragraph">
<p>Application interop manifests are defined using special <code>.interop</code> format. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="php">package vendorA.fx; <i class="conum" data-value="1"></i><b>(1)</b>

import <span class="string"><span class="delimiter">&quot;</span><span class="content">fx/CcyPairRateService.proto</span><span class="delimiter">&quot;</span></span>; <i class="conum" data-value="2"></i><b>(2)</b>

application <span class="constant">CcyPairRateProvider</span> { <i class="conum" data-value="3"></i><b>(3)</b>
    provides fx.<span class="constant">CcyPairRateService</span> to vendorA.* { <span class="constant">GetRate</span>; } <i class="conum" data-value="4"></i><b>(4)</b>
    consumes interop.samples.<span class="constant">GreetingService</span> from interop.samples.<span class="constant">GreetingServer</span> { <span class="constant">ShowGreeting</span>; } <i class="conum" data-value="5"></i><b>(5)</b>
    consumes interop.samples.<span class="constant">EchoService</span> from interop.* { <span class="predefined">Echo</span>; } <i class="conum" data-value="6"></i><b>(6)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define namespace for application</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Import services definition that application provides or consumes</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Application name</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Provided service definition. In this case app only allows using this implementation for other apps in package "vendorA".</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Consumed service definition</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>One more consumed service definition.</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="consumes">Consumes</h5>
<div class="paragraph">
<p>Consumes notation defines to which Service methods this component can execute. This Methods can be provided by several components
 and they will be accessible by discovery for component client code. We explicitly ask to specify exact methods
to support schema evolution and corner cases where one component produce not the full set of service methods</p>
</div>
<div class="paragraph">
<p>Imagine the following scenario:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There is "ServiceA" fully implemented and produced by two components "ComponentA" and "ComponentB"</p>
</li>
<li>
<p>We add new additional method to "ServiceA"</p>
</li>
<li>
<p>"ComponentA" implements this method, where "ComponentB" is still in progress</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Thus exact method import will allow plexus to check if some methods used anywhere, it will allow to check if method is produced by
both components and give error if not.</p>
</div>
</div>
<div class="sect4">
<h5 id="provides">Provides</h5>
<div class="paragraph">
<p>We ask to provide explicit list of methods for consume and provide notations to support service evolutions and changes.
Plexus will be able to check if what set of methods of specific Service implemented in concrete Component and validate if
all mapping are correct and consistent.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-07-31 20:36:20 MSK
</div>
</div>
</body>
</html>